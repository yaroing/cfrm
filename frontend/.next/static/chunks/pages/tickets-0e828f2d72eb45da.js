(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{1445:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets",function(){return t(8274)}])},8274:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var n=t(5893),l=t(7294),i=t(1664),r=t.n(i),a=t(1255),c=t(214);function d(){let[e,s]=(0,l.useState)([]),[t,i]=(0,l.useState)(!0),[d,o]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=async()=>{var e,t,n;try{console.log("Chargement des tickets...");let t=await a.E.get("/tickets/");console.log("Donn\xe9es re\xe7ues:",t);let n=Array.isArray(t)?t:null!==(e=null==t?void 0:t.results)&&void 0!==e?e:[];console.log("Tickets extraits:",n),s(n)}catch(e){console.error("Erreur lors du chargement:",e),o((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.detail)||"Erreur lors du chargement des tickets")}finally{i(!1)}};e()},[]),(0,n.jsxs)(c.Z,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Tickets"}),(0,n.jsx)(r(),{href:"/tickets/new",className:"inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Nouveau ticket"})]}),(0,n.jsxs)("div",{className:"mt-6",children:[t&&(0,n.jsx)("div",{className:"text-gray-500",children:"Chargement…"}),d&&(0,n.jsx)("div",{className:"rounded-md bg-red-50 p-4 text-red-700 border border-red-200",children:d}),!t&&!d&&(0,n.jsx)("div",{className:"overflow-hidden rounded-lg bg-white shadow",children:(0,n.jsxs)("ul",{role:"list",className:"divide-y divide-gray-200",children:[e.map(e=>(0,n.jsx)("li",{className:"px-6 py-4 hover:bg-gray-50",children:(0,n.jsx)(r(),{href:"/tickets/".concat(e.id),className:"block",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900 hover:text-blue-600",children:e.title}),(0,n.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800",children:e.category_name||"—"}),(0,n.jsx)("span",{className:"inline-flex items-center rounded-full bg-yellow-100 px-2 py-0.5 text-xs font-medium text-yellow-800",children:e.priority_name||"—"})]}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:e.content}),(0,n.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-400",children:[(0,n.jsxs)("span",{children:["Canal: ",e.channel_name||"—"]}),(0,n.jsxs)("span",{children:["Cr\xe9\xe9: ",e.created_at?new Date(e.created_at).toLocaleDateString("fr-FR"):"—"]}),e.submitter_name&&(0,n.jsxs)("span",{children:["Par: ",e.submitter_name]})]})]}),(0,n.jsxs)("div",{className:"ml-4 flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800",children:e.status_name||"—"}),(0,n.jsx)("span",{className:"text-gray-400",children:"→"})]})]})})},e.id)),0===e.length&&(0,n.jsx)("li",{className:"px-6 py-8 text-center text-gray-500",children:"Aucun ticket"})]})})]})]})}}},function(e){e.O(0,[430,117,214,774,888,179],function(){return e(e.s=1445)}),_N_E=e.O()}]);