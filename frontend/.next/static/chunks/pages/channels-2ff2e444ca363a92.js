(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{2921:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/channels",function(){return t(3630)}])},3630:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var n=t(5893),r=t(7294),a=t(1255),i=t(214);function l(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0),[o,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[]);let v=async()=>{try{l(!0);let e=await a.E.get("/channels/");s(e.results||e)}catch(e){d("Erreur lors du chargement des canaux"),console.error("Erreur:",e)}finally{l(!1)}},g=async(e,s)=>{try{await a.E.post("/channels/",s),await v(),m(!1)}catch(e){console.error("Erreur lors de la cr\xe9ation:",e)}},j=async(e,s)=>{try{await a.E.patch("/channels/".concat(e,"/"),s),await v(),h(null)}catch(e){console.error("Erreur lors de la mise \xe0 jour:",e)}},f=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce canal ?"))try{await a.E.delete("/channels/".concat(e,"/")),await v()}catch(e){console.error("Erreur lors de la suppression:",e)}};return t?(0,n.jsx)(i.Z,{children:(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})}):o?(0,n.jsx)(i.Z,{children:(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{className:"ml-3",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Erreur"}),(0,n.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,n.jsx)("p",{children:o})})]})]})})}):(0,n.jsx)(i.Z,{children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Canaux de communication"}),(0,n.jsx)("button",{onClick:()=>m(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Nouveau canal"})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{onClick:()=>h(e),className:"text-indigo-600 hover:text-indigo-900",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,n.jsx)("button",{onClick:()=>f(e.id),className:"text-red-600 hover:text-red-900",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Actif":"Inactif"}),(0,n.jsxs)("span",{className:"text-sm text-gray-500",children:["Cr\xe9\xe9 le ",new Date(e.created_at).toLocaleDateString()]})]})]},e.id))}),0===e.length&&(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,n.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun canal"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Commencez par cr\xe9er un nouveau canal de communication."}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsxs)("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:[(0,n.jsx)("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Nouveau canal"]})})]}),(u||x)&&(0,n.jsx)(c,{channel:x,onClose:()=>{m(!1),h(null)},onSave:x?j:g})]})})}function c(e){var s;let{channel:t,onClose:a,onSave:i}=e,[l,c]=(0,r.useState)({name:(null==t?void 0:t.name)||"",description:(null==t?void 0:t.description)||"",is_active:null===(s=null==t?void 0:t.is_active)||void 0===s||s});return(0,n.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,n.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t?"Modifier le canal":"Nouveau canal"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(null==t?void 0:t.id,l)},className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),(0,n.jsx)("input",{type:"text",value:l.name,onChange:e=>c({...l,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,n.jsx)("textarea",{value:l.description,onChange:e=>c({...l,description:e.target.value}),rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:l.is_active,onChange:e=>c({...l,is_active:e.target.checked}),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,n.jsx)("label",{className:"ml-2 block text-sm text-gray-900",children:"Canal actif"})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,n.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),(0,n.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:t?"Modifier":"Cr\xe9er"})]})]})]})})})}}},function(e){e.O(0,[430,117,214,774,888,179],function(){return e(e.s=2921)}),_N_E=e.O()}]);